function _extends(){return(_extends=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t}).apply(this,arguments)}import{isObj}from"../common/utils";var defaultOptions={type:"text",mask:!1,message:"",show:!0,zIndex:1e3,duration:3e3,position:"middle",forbidClick:!1,loadingType:"circular",selector:"#van-toast"},queue=[],currentOptions=_extends({},defaultOptions);function parseOptions(t){return isObj(t)?t:{message:t}}function getContext(){var t=getCurrentPages();return t[t.length-1]}var Toast=function(t){void 0===t&&(t={});var e=((t=_extends({},currentOptions,parseOptions(t))).context||getContext()).selectComponent(t.selector);if(e)return delete t.context,delete t.selector,queue.push(e),e.setData(t),clearTimeout(e.timer),t.duration>0&&(e.timer=setTimeout(function(){e.clear(),queue=queue.filter(function(t){return t!==e})},t.duration)),e;console.warn("未找到 van-toast 节点，请确认 selector 及 context 是否正确")},createMethod=function(t){return function(e){return Toast(_extends({type:t},parseOptions(e)))}};["loading","success","fail"].forEach(function(t){Toast[t]=createMethod(t)}),Toast.clear=function(){queue.forEach(function(t){t.clear()}),queue=[]},Toast.setDefaultOptions=function(t){Object.assign(currentOptions,t)},Toast.resetDefaultOptions=function(){currentOptions=_extends({},defaultOptions)};export default Toast;